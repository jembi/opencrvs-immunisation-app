<!doctype html>
<header state="state"></header>

<div md-whiteframe="2">
  <patients-list ng-if="state.patients" results="state.patients" single-patient="state.singlePatient"></patients-list>
</div>

<div flex="70" flex-offset="15">
  <timeline>
    <timeline-event class="timelineAddEvent">
      <md-button class="md-primary md-raised" ng-click="addEvent()">Add new event</md-button>
    </timeline-event>
    <timeline-event ng-repeat="eventItem in events" ng-class="{timelineCustom: $index != 0}">
      <timeline-badge class="linkageToCare" ng-if="eventItem.eventType === 'linkage-to-care'">
        <md-icon>link</md-icon>
      </timeline-badge>
      <timeline-badge class="hivConfirmation" ng-if="eventItem.eventType === 'hiv-confirmation'">
        <md-icon>start_rate</md-icon>
      </timeline-badge>
      <timeline-badge class="cd4Count" ng-if="eventItem.eventType === 'cd4-count'">
        <md-icon>gradient</md-icon>
      </timeline-badge>
      <timeline-badge class="viralLoad" ng-if="eventItem.eventType === 'viral-load'">
        <md-icon>texture</md-icon>
      </timeline-badge>
      <timeline-panel flex class="info">
        <timeline-heading ng-class="{'linkageToCare': eventItem.eventType == 'linkage-to-care' , 'hivConfirmation': eventItem.eventType == 'hiv-confirmation', 'cd4Count': eventItem.eventType == 'cd4-count', 'viralLoad': eventItem.eventType == 'viral-load' } ">
          <h4>{{eventItem.eventTitle}} - {{fromNowDate(eventItem.eventDate)}}</h4>
        </timeline-heading>
        <display-event-data event="eventItem"></display-event-data>
      </timeline-panel>
    </timeline-event>
  </timeline>
</div>
